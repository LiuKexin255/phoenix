apiVersion: v1
kind: Namespace
metadata:
  name: test 

--- 

kind: Secret
apiVersion: v1
metadata:
  name: grpc-tls
  namespace: test
data:
  tls.crt: >-
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZ2ekNDQTZlZ0F3SUJBZ0lVQVJGUzNIajg5eEVYaWJrL0MwWUpPaFRjaGdJd0RRWUpLb1pJaHZjTkFRRU0KQlFBd1d6RUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdNQ1VkMVlXNW5aRzl1WnpFUk1BOEdBMVVFQnd3SQpVMmhsYm5wb1pXNHhEVEFMQmdOVkJBb01CR2RTVUVNeEZqQVVCZ05WQkFNTURXeHBkV3RsZUdsdUxXZHljR013CklCY05NalF3TnpFME1URXhPRFExV2hnUE1qRXlOREEyTWpBeE1URTRORFZhTUY4eEN6QUpCZ05WQkFZVEFrTk8KTVJJd0VBWURWUVFJREFsSGRXRnVaMlJ2Ym1jeEVUQVBCZ05WQkFjTUNGTm9aVzU2YUdWdU1RMHdDd1lEVlFRSwpEQVJuVWxCRE1Sb3dHQVlEVlFRRERCRm5jbkJqTG14cGRXdGxlR2x1TG1OdmJUQ0NBaUl3RFFZSktvWklodmNOCkFRRUJCUUFEZ2dJUEFEQ0NBZ29DZ2dJQkFPd01odUdHY0JHRllKMnRXMUdEMEhkc2N2OUxsZ01TL0cvTE5XdFcKUWRqTWIxSVVwUHdrYjVEcWEranZCc0tLQjQ0TnFlcWZMeGw3YXRNZzVkbnRvZUR3eFJmVUV1YVFteHp5OUtUYwpPV1dmZWl0ekowSDJTWVMxWmNpOVJGV2NyOTczOFJFYm5LQUJoeUNjYkEyYXk0WGYyTEFBV042RENQcjVKK3FFClAyVWFSelZTeElTeU5SVzJPMkRSQ2YxOVI4VmFaRGYzeWpaOW9sR1lFNG1LeURWR0YwcTV5Zi95MmVCa1M1SjEKa2hYdEJFRk1xQlpMMWZWL1VZNmRHMFdHbjFKcllHUmJQN3oxTEJ0UDlwUmJrdjMxNjd3WE9RZHYxcHZxWU9BMwo1MU03S1RDM3hDSVM1SVc5Qk03MXhiTGpaUStvdGRLb0R4RDZQMTJIZFA4eWFORFYzWDZRVGhob3QxS3Y3L0g3CjNtMXdlSkhWdDhIVk9kandBTE5Qdnp3SzdPNXF5UElFTmJOY1kvZmQ2QUQ4TTd4K3crNUoyUW9vekViblhSdWgKWHIxUWI5UWNaa09sejNMUDlmU0owSGdMYStIejczWmtSMEx4UU5sdkxLQlZJOWlKUncwLy9LNnFYYlhqN0VoTApmN3NQQm8yQml5N3h4bE8rbWY0QllIL0VBTU9hYjJ3NkNhclRERDRwczYvTmpkQzRGc2JQT0JFdmF2UncyemJGCjVLTSs2NXRrVCtnTXp3Q1lGbXRoNzlUN1VnY01WTEpUWCtzSENTenZ5TXYyZ1d3WVNETzNUcE1FL0hsZm5hSC8KUkMwRk1xRE82aEZCTEpscjNUb2pKN2ZWci9Cazg1OXYrMzNTeUpkNWFkcTRvWmErN3VyTVdLd3R4YTYzSEh3YwptL2x4QWdNQkFBR2pkVEJ6TUFrR0ExVWRFd1FDTUFBd0N3WURWUjBQQkFRREFnWGdNQmtHQTFVZEVRUVNNQkNDCkRpb3ViR2wxYTJWNGFXNHVZMjl0TUIwR0ExVWREZ1FXQkJSS3ZUWE5UOUhJMUMrWUZzVnRxMzhrczh6T0hUQWYKQmdOVkhTTUVHREFXZ0JRZ2p1TGdlWndqWXVCVmk3YWFWN1orOHNkc0VUQU5CZ2txaGtpRzl3MEJBUXdGQUFPQwpBZ0VBZmlKUzlNL2h5SEd0Y004cEJGcHlEZlgxSlZYclArOEpqS0JMWTU5TGY5VDBIeURrUGZYSkc5UnZMTTRjClhOWHF6TFNRZEZKTVAxcjE4cUlOVXRwbUZvWDg5UjNlSmE4bXl1YVRkQm5hVjkyUlBvc1dXU3VIdDdQMmp4bisKb2hFSjY2WWQzNzdETWszTll0ZGFQUUswL21XeXhBZmdrL09MTVNyQUQ3elpzWWxYaW1pL0R2NGFWUFgxVEV6ZwpDZUZPYndnaldNTHlPVkxKZ05qOFlpMjFzdmNpelJrK0JJWTBlaEt0RHIyTG9GNWNXS0VLQWZaMkNPTVRjcnRSCmtlUm0yQVpNOUE4OSszeVFaaDRrWjdSa2w5c25MVGE5WjFVdFg3WmdyQWFSM3owcUxhazJ6T0hrQUtTbTh1L2IKUE5QZlBRSk5sRjBNS3YvY2pGOXBLWDJqeC9CblNMYUV5NUxJaFpwVmdqTUlrc2hOWWRuNEZXUUxkaURWdjRJKwpCcHJOamszM2x2a1plTkFYbnpQN0h1V1FqRWdHdDJwdklaR3VkSER0bDlTS2RnQ0VFdGl2ODMrZmU0RFlOOXFyCmVMdUhRdG1mUE9Obno4WkNtMUluaS9RcWJrQmFCSTV6RmxBV3gvRDZYaU5rRHY0Q0ZRZW53QjhEUjJ0T3BYbGYKYm1BbzgrMnFXRCtHL1F6eHJnNEttcUZmZFRnU0hjSEwxOHozVThHUC9aaHp5SEpSampmNjg2T09KeXd4RjBCWgp0VnZDcEhZWnNCeVQzeTdodGI4VURRQklqL1pMSE9SZGpZeThhdU15REM4NHptRjJOOUJCS2ZNV2M0b3NYRzFpCmdlc3BmY2Y0czJ5dmllSHgvRjFkZi9GM0phNnRUR2kwK3FRZWdPYmZHU0tnWFdJPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t
  tls.key: >-
    LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpSQUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1M0d2dna3FBZ0VBQW9JQ0FRRHNESWJoaG5BUmhXQ2QKclZ0Umc5QjNiSEwvUzVZREV2eHZ5elZyVmtIWXpHOVNGS1Q4SkcrUTZtdm83d2JDaWdlT0RhbnFueThaZTJyVApJT1haN2FIZzhNVVgxQkxta0pzYzh2U2szRGxsbjNvcmN5ZEI5a21FdFdYSXZVUlZuSy9lOS9FUkc1eWdBWWNnCm5Hd05tc3VGMzlpd0FGamVnd2o2K1NmcWhEOWxHa2MxVXNTRXNqVVZ0anRnMFFuOWZVZkZXbVEzOThvMmZhSlIKbUJPSmlzZzFSaGRLdWNuLzh0bmdaRXVTZFpJVjdRUkJUS2dXUzlYMWYxR09uUnRGaHA5U2EyQmtXeis4OVN3YgpUL2FVVzVMOTlldThGemtIYjlhYjZtRGdOK2RUT3lrd3Q4UWlFdVNGdlFUTzljV3k0MlVQcUxYU3FBOFErajlkCmgzVC9NbWpRMWQxK2tFNFlhTGRTcisveCs5NXRjSGlSMWJmQjFUblk4QUN6VDc4OEN1enVhc2p5QkRXelhHUDMKM2VnQS9ETzhmc1B1U2RrS0tNeEc1MTBib1Y2OVVHL1VIR1pEcGM5eXovWDBpZEI0QzJ2aDgrOTJaRWRDOFVEWgpieXlnVlNQWWlVY05QL3l1cWwyMTQreElTMys3RHdhTmdZc3U4Y1pUdnBuK0FXQi94QUREbW05c09nbXEwd3crCktiT3Z6WTNRdUJiR3p6Z1JMMnIwY05zMnhlU2pQdXViWkUvb0RNOEFtQlpyWWUvVSsxSUhERlN5VTEvckJ3a3MKNzhqTDlvRnNHRWd6dDA2VEJQeDVYNTJoLzBRdEJUS2d6dW9SUVN5WmE5MDZJeWUzMWEvd1pQT2ZiL3Q5MHNpWAplV25hdUtHV3Z1N3F6RmlzTGNXdXR4eDhISnY1Y1FJREFRQUJBb0lDQUFhU3Ivb1ZWemN1cjQ2K2VENnlLT2E5CmJldVkza3JVUDFRcDNJRkNXZk9zZUN4WkE3SGJmaUdTL0lta1I4djRvZDZaVis0ZkRBWEZzWGNpK1RHUEIrRWkKbFR0dFVmQXFqazR4WUFGNytpdHZ0QnhFQU8rcDJQamRnQUhGcnZLakdnVGZncjZKSmp5d3BET1MxWUd3dWZwKwpyZXNUUEdaSVQvS0VxQUZVV010Uy9yRC8vclhLL0ZaUUlISEpDbUlkR0NlNVJWV0haSEd0WUl6cyt4ekxNUGxtClMvRmVVRzhja3lkMzVZQ1UzbW8yd3hYQ0thTlN6ZWkvMkl5Y0NIbVFkc3pweldtbi9wT3ZnRkNib3J3MWUxZXYKN3BZNmo1R0s0a2NOMFJBblVGMUpoa05yZDVaREVFcmUxVVNoMUlVdlpyWFhtdVlNZk54cU9vUGJTUFZQQVJzRAphZGwxblQ5cmZXUUdIZ1czOXFYRjRYWWhzS3YvMWxGNVlwcXovT3dnWXhwTldBbnhZa1hpTlczQnRwbkpKTG0zCko0QnNZVG8vUUx1SzlpaXJ0K1BRQm5sUm1Mbnc5Vm1xejhLREg4Z1d5eisybCtzNEQzNTZ4Q00vMGM0amFPNkEKQXhNNzkyUXU5VkJWU2pNOS8zbFZ4V011aDFlZFlPZ3FuRXpER3FLT01icGJTRDZKYk1tdldlRFN3M2tqZ3JESgppc2lUMU5LQ3hRZEwwemZ2VmxUQll4NkszZUJ0dUMxOTEvbHpzOTBrZ1QyS3NzNEJjdUNteHhyT1BsVHN5ZzNzCjdqY1Nld3RpdERaejdmdFFENDVYTHJNVXN0SEgxNWcyNmJMVzBJVzUzV3JqTTBlU1AvbWRhZWNNSlZTZGxZVDkKb0Y3NCtJeWpCOVRYSnpzWXRUNUJBb0lCQVFEK0piTXUzdkRuNS9XeWxHNHE2MEpMSjFLdHhaL2RLMkxXaDl2ZAppbWpBR3dBbEJUYUhhUU9YUE1Za1MzNWR4MmFqRGVlOHd4MjBtN0ZTN2JaTytFMEkzWXlxbDZHelRYVUoxcVp5CjA0OUtLU0l3RkdaaXMyOUVaQzQ2c0NpSXRQUCtNTWpSODhRQkRPaTdCbFAwa2hZbnUzdlA3ZHZWbkpxZzBBU3IKckdzWjFpakdJOXVBVXNpUkdtdDBVaGpSc0FkYjAzNjJMWEdXYUoxdVBDK1JDeHg3ZFBYT2xJRHNoeU9mVXlmUQpIRk5tVVppMlF3YzZhRkZyOGRiRUJ2d0xnVzJPVVFSQlhUZ3RqR1M4SDMzdldneWZpQ2QvN0dQK3MrR2duUUw0CnFkKzRpWVk2ODJoczZOa3I1NWlvL2N5azY5aEJYN0xSYVFLWXFmdmJVTEZJY2lZeEFvSUJBUUR0eFEwVWV0R24KZ0R3K0FzQVBKYkEydVE5ZXJwK05ZZTFuaEhSdWNlK1BFWTVDV1oxMkRhMVRtekV0MS9RWXJ1OWJqYTgraEdKWAo2SzlkSjVBeHU2VVVnM21weWlOc3pIcXYzejFwczlJQ3FZTFR5UDR0RmlxaERhaXgzSW5kUmp1NXg4N2pUc3hkClgySjBWbGJ0Z1Rrcml2QUo1aTNwOTJqSmFuOCtqZWxLT0VaY3pHL1FxbkhvN2NxNlVjdTdJQlovcGFCbm5KYU4KNmE5M3dIMzBFS0piNjVROGNucFNjUmZURHcrSlZJRm1HRWZXbUR5NVZMc25qWjF2c2JFS0owMjRPcVE5MjlkQQpZenRjcHdIRVRoL0VldCtuL29lNG53OEhYUnpWNThaNDJzM1p4ZVFWNkZNQitGQTYvVjFhOForMndFK2w3SlpsCm1odWhwamNVZC9kQkFvSUJBUURoUjYvT2syWitXdnBMSXhHSXorT0MxTWVRSzhicWVTUHl3SmtmaHlvVlo1bTQKTnllLzNsR0ZoU1NxVlpVZE1iMEVPalk1OThia0tzS0RuUjFtWU9tQU8wc09pTHlZUU1mSFFkTm5vNnEzZFVETgoxN2R1TkZva0NKMkYvbExmNDI4STJsdVk1L2pOYVpEKy83djU1bWpuTFdTeHlzbDhUNFl0bUZjYmlnbWg3RmxXClVjQ252am4xamJMRWVHVnhzaFREeS9UZExla3JCMjdOb1dJVXN3RzdXZER1SG1zdHZ4alBpUm1ZZXhOZWRtUGsKNUFPTFBaODNEVGR2cWpWUFNacEFkZ1pNbm9KR3RkVXhnTVRVSDBGalJJQ20vM2NmOW5uQk1vekl1V1FMb3pRdQpHMGRzaXZhKzJWdFVLUzEyMzJ4aGZwLzJ5cHUza2E0a0dTSWM4cnB4QW9JQkFRQ2taMkx5N1RWNER5Z1liSWhtCk1OWVdFSUc3SXgwNWdpUElOd0xXdHp0QWZwQVIrcXJ3ek9ZeThCVGlNUGNiOWlHVStYUFowMm00aFRCMFJmM2oKRlc5QXJ1UDU3Y1h1M2JoYlVRM0N2ODZQZnF2eVNvRE5wZzBWelQ3K3RKSXpDUFFWTWo0d1YvVGcveW94Yk4ydwpYWEN0VmVWQnd3R3VUQjhOWGZEYnpQNHBEcDVBWGk5V1pmUmJiY2lHYWpabmpmbGdpNkpNNGk0THREQmFxaU90CkZhOWR4WmQ2OEdENkRpNitCaVRrL1NSMzlvUDlzc2dTRWE5UzJ3Mm9CSUo0bGRLY2R4ZkhtZkhOR0pBY01YSDgKVFZTVDQ2NHdGOE82ZVdqSDI2OHJqSlprVEU2WHJNaFlDWXNUeXFHWEdFZHJzYlNRaFlyTkhMaWxTaGllL2pJSgptaVhCQW9JQkFRRFV3YW9HNnkydU94a0pnSmFBVDVEbE9VdnEvbGx2KzB1b2F1L3FwVzEyckZVeHVXalhadEtlCjdwMUdGcCtkYkszcGZBV1gvRkRpWndsZHU2QmN6c0tzZWhzNGI1bFNtMXVQdmdxNk0vOFpKTlQ0ZytUM0tCbU4KUkRtT2EwbzFjeDY2Vnk5L2NId2ZraXoxZzRKMDdDMzFPcXVtK2hZMVRMZEN5N2pTV3pqZXVnY09YbWR4THdJeApYak9OL0JmZHFYeDFkdi9JemNUQkpISDRWMVRPVUhXeFNkSWJUbzRhMytCVlFneU1GREY0c1BhUWJidjhjaVZWCnp6NHpVSDJMbHNjUWpoZGdva2NkdkNMa0k3aUZFK2tMclBvaEVRRVBxNVZwdU14dTlGWXh6UUFuZjV4c1R2N2EKakVrV1BxODlHRThzUi9Qa0YvWGZBWXRrdHRpdDFUeFkKLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQ==
type: kubernetes.io/tls

--- 

kind: Secret
apiVersion: v1
metadata:
  name: grpc-ca
  namespace: test
data:
  ca.crt: >-
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZsekNDQTMrZ0F3SUJBZ0lVZENGaFo1N2pIb1JCM0loeEJxRnZ2S2Q0V0dRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1d6RUxNQWtHQTFVRUJoTUNRMDR4RWpBUUJnTlZCQWdNQ1VkMVlXNW5aRzl1WnpFUk1BOEdBMVVFQnd3SQpVMmhsYm5wb1pXNHhEVEFMQmdOVkJBb01CR2RTVUVNeEZqQVVCZ05WQkFNTURXeHBkV3RsZUdsdUxXZHljR013CkhoY05NalF3TnpFME1URXhPRFF6V2hjTk16UXdOekV5TVRFeE9EUXpXakJiTVFzd0NRWURWUVFHRXdKRFRqRVMKTUJBR0ExVUVDQXdKUjNWaGJtZGtiMjVuTVJFd0R3WURWUVFIREFoVGFHVnVlbWhsYmpFTk1Bc0dBMVVFQ2d3RQpaMUpRUXpFV01CUUdBMVVFQXd3TmJHbDFhMlY0YVc0dFozSndZekNDQWlJd0RRWUpLb1pJaHZjTkFRRUJCUUFECmdnSVBBRENDQWdvQ2dnSUJBTWVPNStkWWFpNjM4NlE1cnN2R3ZIQ2JPVmxHOFI2UzRnNnFHLzkrSDRHaE9oTmYKY01DbGhqWHRhT05qeXNydzh3b3JoZE9sZjlTWlpMWHMwdmRTc0ViNmdnNG5oYWwrQjZ3R2tnZW9KNlJqcHQ0QwpOT3FaaDNOeHpHUFowUGZDbDJDTkVqeGJ4R3hOWnFyR0FkSDEvMXg0SjZYZ2RnZHczYnNvQ1E4clNmZGk2MlZBCjJXcnUySW5CSmdXR1lxc3c0QXVacy96NG1kUkRQTVJ5ZVFmR2JnRzM2UlhTZ0d1eHUwVUtQODNTck1CUDBKSysKUmsyeFVMTzd0WTBiTXd5dkozTmg4bzlhcmV1R01hbFBaM1BobmR2ZUFLL3hNNWpXVXJScUljTkFIVi9qVVc3RwpnQ2ZmcnZ6cDhyeG5YQzljNTMvR0VKdnc3VzkxVEg4dUJJTUdQd1pzWkZVYzlxbFZuYk9WY0hsVEY4dHJERUM0Ckw5cVRTbEJLblo4NW9Qa21zZlRCamVNSnROeW4wZ09MN0FYVXJrVEdaaVlwZUFUanFUNHR0ZXFkM0hCenhnZy8KdCt0WEZHZUxraFBpblFSaW5mOURId3FZOFR3dlRoNFZ1cGx6VS9kR0tzRnpXdSt1M0lxR3BLbEZmV0pDYXh1VQo4aE54THRUOTVUaEdJTWNXK1pEb3U3ODZ0L2swWWlkT0NabDQ4cjdhTmliMGhTbnA4TzRLVDg5VVFEcVNYTFFUCjM1bEQ3SXhjU1AxdFI2SlVFeUFmVURSTlp5TnVBUDVJZUNubG5WaHJ3WThRS2dWcEsrOGFTWll5cHN3b05KaTMKbERmbmJCcnk3YTYwS2tOWXdxcGhwd2M3NTJnWTJrNnNkM3F1MTlacEtRNnFvYUh6c1ljdXcvTUgxVmdSQWdNQgpBQUdqVXpCUk1CMEdBMVVkRGdRV0JCUWdqdUxnZVp3all1QlZpN2FhVjdaKzhzZHNFVEFmQmdOVkhTTUVHREFXCmdCUWdqdUxnZVp3all1QlZpN2FhVjdaKzhzZHNFVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElDQVFDZk5vVFhTVEpUcWJpaXJjN3VMN0hjU0dtRm9mb2NKNHZ5V1M2ZklLY0FkbHB5VTh4YgpwV24xWXRmbmUzejFsM1h3c09hUXFjQ3FRVzBPVjlYMDNwRHIwR0RkcmNob2tDbE1leFAwbEhGcEtyRldXL3I2ClRrQk9OVHF2Z3F5OGRVdWlhejV5Y3N0WjNva0FqOEl4cjJ1ZElTWW53U2paVHpFdVQ0cFhQZXVhbEVTWUZvN1IKSS9iblB6bFoyL05xYWdsQUJGaXF2KzV3VzE2WC9MelZyTXpsU2NlOXg5MWtpMk9SSU1Rc0FCdHFoaVYrdkRyTAppMHFZVE1rYTJMNVV4c0VCUWpGUHV6Y0lXMit4MmtocjF1clRNTXNpTytjMUFySUJmNUZXdGhFWjVHS2ZZZThvCk9vU0h1ZmJNMlBNaDNiaTVVckM1RE1rSDFwNldoVExvdm9MYXZ6REtBMXRsd3Zodm11cWlYdmFkbmE5UEIzWEwKMmsyMS9nR3l0ZGNLalRhdXBiTjluU0xKM3BZWVp1OWFnOFNDWGhBa0tsWXBGaXE0TkowOE8yaW95LzlaZVhuWgpQaWtaODkrTlBrVGY4dmphcEp3eWJiY0VRUmU1YktMa1pSZUVQdEFOT0pwVWdRc2VDMHJyMkpUNjVRcjlBS21hClU5aGFYNDE5UUpjTE5lYVVYWnZydnBpQjg1Q0NXcEhZYWJvdUQwZEFGVitiZEdySXlLZEFzVU1pY01DWG9uc20KR1FCaE5hTURUU25vU3NUeVI4UkltNkZsQzlvYVY0ZUNDTTl0ajVsVVc0dm9QYUsvVXlqRnRYMUw5OFFscUtjUgp5WjFrUmN0OGJCSW9udE9kcktXZmNpMTdTdEc0dXltWUhCNXVmRG9icVliR3JaNTZDUUhTM0l0ZnpnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ==
type: Opaque 

--- 

apiVersion: v1
kind: Service
metadata:
  name: ubuntu-dev-service
  namespace: test
  labels:
    app: ubuntu-dev
spec:
  ports:
    - port: 22
      name: ssh
      targetPort: 22
      protocol: TCP
  type: LoadBalancer
  selector:
    name: ubuntu-dev

---

apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: ubuntu-dev
  labels:
    app: ubuntu-dev
  namespace: test
spec:
  selector:
    matchLabels:
      name: ubuntu-dev
  serviceName: "ubuntu-dev-service"
  replicas: 1 # 默认值是 1
  template:
    metadata:
      labels:
        name: ubuntu-dev
        app: ubuntu-dev
    spec:
      containers:
        - name: ubuntu-dev
          image: docker.liukexin.com/dev/ubuntu:v0.1.5
          ports:
            - containerPort: 22
              name: ssh
          volumeMounts:
            - name: ubuntu-dev-pvc
              mountPath: /home/liukexin/mount
            - name: kube-config
              mountPath: /home/liukexin/.kube
              readOnly: true
      volumes: 
        - name: kube-config
          configMap:
            name: kube-config
            items: 
              - key: config
                path: config
  volumeClaimTemplates:
    - metadata:
        name: ubuntu-dev-pvc
      spec:
        accessModes: ["ReadWriteOnce"]
        storageClassName: "ceph-rbd"
        resources:
          requests:
            storage: 32Gi
